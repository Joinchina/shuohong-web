"use strict";var url={},user="",deduction=0;function getDetail(e,t,i){http.get({url:"/getResourceDetail",data:{id:t,filetype:i,userId:e.id,sekugou:e.sekugou}},function(e){console.log(e);e=e.data;deduction=e.deduction;var t='<div class="header"><h1>'+e.fileName+'</h1></div><div class="video_box"><video src="'+e.resourceAddress+'" controls="controls"></video></div><div class="describe"><div class="left"><h1>文字描述：<span>'+e.describes+"</span></h1><h1>格式：<span>"+e.type+"</span> 分辨率：<span>"+e.resolvingPower+'</span></h1></div><div class="right"><button onclick="downVideo()">点击下载</button><h1>下载需要'+e.deduction+"积分</h1></div></div>";$(".detail_box").html(t);var i,o="";i=e.picS.split(",");for(var d=0;d<i.length;d++)o+='<div class="img_box"><img src="'+i[d]+'" alt=""/></div>';$(".detail_box").append(o)})}function downVideo(){user.points<deduction?alert("您当前积分不够，下载视频需要"+deduction+"分，您只有"+user.points):http.get({url:"/getDownloadUrl",data:{id:url.fileId,filetype:url.filetype,userId:user.id,sekugou:user.sekugou}},function(e){if(0===e.code){var t=document.createElement("a");document.body.appendChild(t),t.style.display="none",t.href=e.data,t.target="_blank",t.download="",t.click(),document.body.removeChild(t)}else alert(e.msg);console.log(e)})}!function(){(user=get("user"))||(window.location.href="/login.html"),user=user;var e=[],t={},i=[];e=window.location.search.substr(1,window.location.search.length-1).split("&");for(var o=0;o<e.length;o++)t[(i=e[o].split("="))[0]]=Number(i[1]);getDetail(user,(url=t).fileId,t.filetype)}();