"use strict";var url={},user="",deduction=0;function getDetail(e,o,t){http.get({url:"/getResourceDetail",data:{id:o,filetype:t,userId:e.id,sekugou:e.sekugou}},function(e){console.log(e);e=e.data;deduction=e.deduction;var o='<div class="header"><h1>'+e.fileName+'</h1></div><div class="video_box"><video src="'+e.resourceAddress+'" controls="controls"></video></div><div class="describe"><div class="left"><h1>文字描述：<span>'+e.describe+"</span></h1><h1>格式：<span>"+e.type+"</span> 分辨率：<span>"+e.resolvingPower+'</span></h1></div><div class="right"><button onclick="downVideo()">点击下载</button><h1>下载需要'+e.deduction+"积分</h1></div></div>";$(".detail_box").html(o);for(var t="",i=e.picS.split(","),d=0;d<i.length;d++)t+='<div class="img_box"><img src="'+i[d]+'" alt=""/></div>';$(".detail_box").append(t)})}function downVideo(){user.points<deduction?alert("您当前积分不够，下载视频需要"+deduction+"分，您只有"+user.points):http.get({url:"/getDownloadUrl",data:{id:url.fileId,filetype:url.filetype,userId:user.id,sekugou:user.sekugou}},function(e){var o;0===e.code?(o=document.createElement("a"),document.body.appendChild(o),o.style.display="none",o.href=e.data,o.target="_blank",o.download="",o.click(),document.body.removeChild(o)):alert(e.msg),console.log(e)})}!function(){(user=get("user"))||(window.location.href="/login.html"),user=user,console.log(user),console.log(window.location.search);for(var e=[],o={},t=[],e=window.location.search.substr(1,window.location.search.length-1).split("&"),i=0;i<e.length;i++)o[(t=e[i].split("="))[0]]=Number(t[1]);console.log(o),getDetail(user,(url=o).fileId,o.filetype)}();